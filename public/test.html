<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="./favicon.ico">
    <link rel="stylesheet" type="text/css" src="./css_skeleton.css">
    <script src="https://d3js.org/d3.v4.min.js"></script>
    
    <style>
        div {
            background-color: maroon;
            text-align: right;
            padding: 10px;
            margin-bottom: 2px;
        } 

        .black {
            fill: white;
        }

        .bar {
            fill: steelblue;
        }

        .group:hover > .bar {
            fill: red;
        }

        .axis text {
            font: 10px sans-serif;
        }

        .x.axis path {
            display: none;
        }

        .tooltip {   
            position: absolute;         
            text-align: center;         
            width: 60px;                    
            height: 28px;                   
            padding: 2px;               
            font: 12px sans-serif;      
            background: lightsteelblue; 
            border: 0px;        
            border-radius: 8px;         
            pointer-events: none;           
        }

    </style>

    <title>Title</title>
</head>
<body>
    <h1 class="className">Hello World</h1>
    <svg id="content"></svg>
    <button id="button">change</button>

    <script>
        var margin = {top: 20, right: 30, bottom: 30, left: 40};
        var width = 960 - margin.right - margin.left;
        var height = 500 - margin.top - margin.bottom;

        var scaleX = d3.scaleBand().rangeRound([0, width]).padding(0.1);
        var scaleY = d3.scaleLinear().range([height, 0]);

        var xAxis = d3.axisBottom(scaleX);
        var yAxis = d3.axisLeft(scaleY).tickArguments([10, "%"])

        var chart = d3.select("#content")
            .attr("width", width + margin.left + margin.left)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
                .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

        var tooltip = d3.select("body")
            .append("div")   
            .attr("class", "tooltip")               
            .style("opacity", 0);


        // d3.tsv("data.tsv", type, function(err, data) {
            var data = [
                {name: 'A', value: .08167},
                {name: 'B', value: .01492},
                {name: 'C', value: .02782},
                {name: 'D', value: .04253},
                {name: 'E', value: .12702},
                {name: 'F', value: .02288},
                {name: 'G', value: .02015},
                {name: 'H', value: .06094},
                {name: 'I', value: .06966},
                {name: 'J', value: .00153},
                {name: 'K', value: .00772},
                {name: 'L', value: .04025},
                {name: 'M', value: .02406},
                {name: 'N', value: .06749},
                {name: 'O', value: .07507},
                {name: 'P', value: .01929},
                {name: 'Q', value: .00095},
                {name: 'R', value: .05987},
                {name: 'S', value: .06327},
                {name: 'T', value: .09056},
                {name: 'U', value: .02758},
                {name: 'V', value: .00978},
                {name: 'W', value: .02360},
                {name: 'X', value: .00150},
                {name: 'Y', value: .01974},
                {name: 'Z', value: .00074}
            ]

            var data1 = [
                {name: 'A', value: .1},
                {name: 'B', value: .2},
                {name: 'C', value: .3},
                {name: 'D', value: .4},
                {name: 'E', value: .8}
            ]

            scaleX.domain(data.map(function(d) { return d.name }));
            scaleY.domain([0, d3.max(data, function(d) { return d.value })]);


            chart.append("g")
                .attr("class", "x axis")
                .attr("transform", "translate(0," + height + ")")
                .call(xAxis);

            chart.append("g")
                .attr("class", "y axis")
                .call(yAxis);
                
            chart.append("text")
                .attr("y", height + (margin.bottom / 2))
                .attr("x", width / 2)
                .attr("dy", ".7em")
                .style("text-anchor", "middle")
                .text("Letter"); 

            chart.append("text")
                .attr("transform", "rotate(-90)")
                .attr("y", - margin.left)
                .attr("x", - (height / 2))
                .attr("dy", ".7em")
                .style("text-anchor", "middle")
                .text("Frequency"); 

            var g = chart.selectAll(".group")
                .data(data)
                .enter()
                .append("g")
                    .attr("class", "group")
                    .on("mouseover", function(d) {      
                    tooltip.transition()        
                        .duration(200)      
                        .style("opacity", .9);      
                    tooltip.html(d.name + "<br/>"  + d.value)  
                        .style("left", scaleX(d.name) + margin.right + "px")     
                        .style("top", scaleY(d.value) + margin.top + margin.bottom + 15 + "px");    
                    })                  
                    .on("mouseout", function(d) {       
                        tooltip.transition()        
                            .duration(1000)      
                            .style("opacity", 0)
                    });

            g.append("rect")
                .attr("class", "bar")
                .attr("x", function(d) { return scaleX(d.name) })
                .attr("y", function(d) { return scaleY(d.value) })
                .transition()
                    .duration(1000)
                    .ease(d3.easeLinear)
                .attr("height", function(d) { return height - scaleY(d.value); })
                .attr("width", scaleX.bandwidth());

            g.append("rect")
                .attr("class", "black")
                .attr("x", function(d) { return scaleX(d.name) })
                .attr("y", 0)
                .attr("height", function(d) { return scaleY(d.value); })
                .attr("width", scaleX.bandwidth())

            // var bar = chart.selectAll("g")
            //     .data(data)
            //     .enter().append("g")
            //     .attr("transform", function(d, i) { return "translate(" + scaleX(d.name) + ", 0)"; });

            // bar.append("rect")
            //     .attr("y", function(d) { return scaleY(d.value); })
            //     .attr("width", scaleX.bandwidth())
            //     .attr("height", function(d) { return height - scaleY(d.value); });

            // bar.append("text")
            //     .attr("x", scaleX.bandwidth())
            //     .attr("y", function(d) { return scaleY(d.value) + 3 })
            //     .attr("dy", ".75em")
            //     .text(function(d) { return d.value; });

        // });

        // function type(d) {
        //     d.value = +d.value
        //     return d;
        // }

        document.getElementById("button").onclick = function(e) {
            console.log("sad")
        }
    </script>
</body>
</html>