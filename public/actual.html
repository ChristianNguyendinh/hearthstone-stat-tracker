<!DOCTYPE html>
<html lang="en" width="100%" height="100%">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="./favicon.ico">
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="/scripts/index.js" type="text/javascript"></script>
    
    <style>
        rect:hover {
            stroke: black;
            stroke-width: 3px;
        }
        .bar-title {
            font-size: 32px;
        }

    </style>

    <title>Title</title>
</head>
<body width="100%" height="100%">
    <h1 class="className">Hello World</h1>
    <div id="container" style="width: 100%; height:100%">
        <svg id="content"></svg>
    </div>
    <button id="button1">changeDay</button>
    <button id="button2">changeMonth</button>
    <button id="button3">changeYear</button>

    <script>
        var data = 
        {
            "warlock":{"gamesWonAs":8,"gamesPlayedAs":13,"gamesLostAgainst":2,"gamesPlayedAgainst":2},
            "warrior":{"gamesWonAs":2,"gamesPlayedAs":3,"gamesLostAgainst":3,"gamesPlayedAgainst":4},
            "paladin":{"gamesWonAs":0,"gamesPlayedAs":0,"gamesLostAgainst":0,"gamesPlayedAgainst":2},
            "druid":{"gamesWonAs":0,"gamesPlayedAs":3,"gamesLostAgainst":0,"gamesPlayedAgainst":2},
            "rogue":{"gamesWonAs":1,"gamesPlayedAs":1,"gamesLostAgainst":1,"gamesPlayedAgainst":3},
            "priest":{"gamesWonAs":0,"gamesPlayedAs":1,"gamesLostAgainst":2,"gamesPlayedAgainst":2},
            "hunter":{"gamesWonAs":2,"gamesPlayedAs":2,"gamesLostAgainst":1,"gamesPlayedAgainst":5},
            "mage":{"gamesWonAs":1,"gamesPlayedAs":21,"gamesLostAgainst":2,"gamesPlayedAgainst":3},
            "shaman":{"gamesWonAs":0,"gamesPlayedAs":0,"gamesLostAgainst":0,"gamesPlayedAgainst":2}
        };

        var classColor = {
            "warlock": "purple",
            "warrior": "red",
            "paladin": "yellow",
            "druid": "brown",
            "rogue": "gray",
            "priest": "pink",
            "hunter": "orange",
            "mage": "blue",
            "shaman": "green"
        };

        var dataArray = Object.keys(data).map(function(x) {
            return {"class": x, "color": classColor[x], "records": data[x]}
        });

        var margin = {top: 85, right: 20, bottom: 40, left: 80};
        var width = 1100 - margin.right - margin.left;
        var height = 700 - margin.top - margin.bottom;

        // init scales
        var scaleX = d3.scaleBand().rangeRound([0, width]);
        var scaleY = d3.scaleLinear().rangeRound([height, 0]);

        // Create Axes
        var xAxis = d3.axisBottom(scaleX);
        var yAxis = d3.axisLeft(scaleY);

        var barChart1 = d3.select("#content")
            .attr("preserveAspectRatio", "xMinYMin meet")
            .attr("viewBox", "0 0 " + (width + margin.left + margin.left) + " " + (height + margin.top + margin.bottom))
            .append("g")
                .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

        scaleX.domain(dataArray.map(function(d) { return d.class }));
        scaleY.domain([0, d3.max(dataArray, function(d) { return d['records']['gamesPlayedAs']})]);

        barChart1.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);

        barChart1.append("g")
            .attr("class", "y axis")
            .attr("transform", "translate(-2,0)")
            .call(yAxis);

        barChart1.append("g")
            .attr("transform", "translate(" + (width * 0.35) + "," + (0 - margin.bottom) + ")")
            .append("text")
                .html("Games Played Against")
                .attr("class", "bar-title")

        barChart1.selectAll("rect")
            .data(dataArray)
            .enter()
            .append("rect")
                .attr("x", function(d) { return scaleX(d['class']) })
                .attr("y", function(d) { return scaleY(d['records']['gamesPlayedAs']) })
                .attr("width", scaleX.bandwidth())
                .attr("height", function(d) { return height - scaleY(d['records']['gamesPlayedAs']) })
                .style("fill", function(d) { return d['color'] })


    </script>
</body>
</html>




